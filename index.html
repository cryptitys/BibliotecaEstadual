<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Encerramento Tempor√°rio</title>
  <style>
    :root {
      --bg-dark: #0a0f23;
      --bg-light: #f5f5f5;
      --fg-dark: #fff;
      --fg-light: #333;
    }
    body {
      margin: 0;
      background: var(--bg-dark);
      color: var(--fg-dark);
      font-family: Arial, sans-serif;
      overflow-x: hidden;
      scroll-behavior: smooth;
      transition: background 0.5s, color 0.5s;
    }
    body.light {
      background: var(--bg-light);
      color: var(--fg-light);
    }
    #themeToggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(0,0,0,0.3);
      border: none;
      color: white;
      padding: 0.5em;
      border-radius: 0.3em;
      cursor: pointer;
      transition: background 0.3s;
      z-index: 100;
    }
    body.light #themeToggle {
      background: rgba(255,255,255,0.7);
      color: #333;
    }
    section {
      height: 100vh;
      scroll-snap-align: start;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 2rem;
    }
    main {
      scroll-snap-type: y mandatory;
      height: 300vh;
      overflow-y: scroll;
    }
    h1 { font-size: 3rem; margin: 0.2em; }
    #countdown { font-size: 2rem; margin-top: 0.5em; }
    .message { max-width: 700px; line-height: 1.6; font-size: 1.2em; }
    .typed { border-right: 2px solid currentColor; white-space: pre-wrap; overflow: hidden; }
    canvas { position: fixed; top:0; left:0; z-index: 0; }
  </style>
</head>
<body>

<button id="themeToggle">üåô/‚òÄÔ∏è</button>

<canvas id="galaxy"></canvas>

<main>
  <section id="intro">
    <h1>Projeto encerrado temporariamente</h1>
    <div id="countdown">Carregando...</div>
  </section>

  <section id="middle">
    <h1>Agradecemos sua presen√ßa at√© aqui</h1>
  </section>

  <section id="farewell">
    <div class="message typed" id="typedMessage"></div>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/three@0.134.0/build/three.min.js"></script>
<script>
  // 1. Theme toggle
  const btn = document.getElementById('themeToggle');
  btn.addEventListener('click', () => document.body.classList.toggle('light'));

  // 2. Countdown fixada em 30 dias
  const start = new Date(); // define quando a p√°gina foi lan√ßada, ajust√°vel
  const end = new Date(start.getTime() + 30 * 24 * 60 * 60 * 1000);
  const cdEl = document.getElementById('countdown');
  function updateCountdown() {
    const now = new Date();
    const diff = end - now;
    if (diff <= 0) {
      cdEl.textContent = "Novo projeto lan√ßado!";
      clearInterval(cntInterval);
      return;
    }
    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor(diff / (1000*60*60) % 24);
    const m = Math.floor(diff / (1000*60) % 60);
    const s = Math.floor(diff / 1000 % 60);
    cdEl.textContent = `${d}d ${h}h ${m}m ${s}s at√© o pr√≥ximo projeto`;
  }
  const cntInterval = setInterval(updateCountdown, 1000);
  updateCountdown();

  // 3. Three.js gal√°xia
  const canvas = document.getElementById('galaxy');
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  camera.position.z = 50;
  const stars = new THREE.BufferGeometry();
  const starCount = 10000;
  const positions = new Float32Array(starCount * 3);
  for (let i = 0; i < starCount * 3; i++) positions[i] = (Math.random() - 0.5) * 800;
  stars.setAttribute('position', new THREE.BufferAttribute(positions, 3));
  const mat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5, transparent: true });
  const galaxy = new THREE.Points(stars, mat);
  scene.add(galaxy);
  function animate() {
    galaxy.rotation.y += 0.0005;
    renderer.render(scene, camera);
    requestAnimationFrame(animate);
  }
  animate();
  window.addEventListener('resize', () => {
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
  });

  // 4. Typed effect
  const txt = `Este projeto foi encerrado temporariamente por motivos pessoais e pela necessidade de maior flexibilidade de tempo.\n\nDesenvolvido com carinho por uma √∫nica pessoa ‚Äî um espa√ßo de aprendizado, ideias e paix√£o.\n\nDaqui 30 dias um novo cap√≠tulo surgir√°, com mais experi√™ncia, mais foco e energia renovada.\n\nObrigado por estar aqui. At√© breve.`;
  const dest = document.getElementById('typedMessage');
  let idx = 0;
  function type() {
    if (idx < txt.length) {
      dest.innerHTML += txt[idx] === '\n' ? '<br>' : txt[idx];
      idx++;
      const delay = txt[idx-1].match(/[.!?]/) ? 400 : 25;
      setTimeout(type, delay);
    }
  }
  // inicia no scroll da 2¬™ tela
  window.addEventListener('scroll', () => {
    if (window.scrollY > window.innerHeight * 2 - 200 && idx === 0) type();
  });
</script>

</body>
</html>
